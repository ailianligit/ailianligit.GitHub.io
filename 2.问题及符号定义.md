# \chapter{基于剪枝优化的大模型联邦训练算法}

## \section{问题及符号定义}

本文提出的大模型联邦训练算法基于联邦学习的框架，利用分布在众多客户端上的本地数据集，以协作的方式训练一个性能良好的联邦模型。

优化目标 损失函数

联邦学习

客户端 数据集 模型参数 梯度 本地迭代次数 通信轮次 权重 掩码



\begin{table}[h] %voc table result
	\centering
	\caption{符号定义}
	\begin{tabular}{*{4}{c}}
		\toprule
        符号 & 定义 & 符号 & 定义\\
        \midrule
        $n$，$N$ & 客户端索引，客户端总数 & $\mathcal{D}_{n}$，$\mathcal{B}_n$ & 本地数据集，小批量训练数据\\
        $\alpha$，$\Delta\alpha$ & 剪枝率，逐层剪枝率 & $\eta^t$ & 学习率\\
        $t$，$T$ & 通信轮次，通信总轮数 & $e$，$E$ & 本地迭代轮次，本地迭代总轮数\\
        $\theta^t$，$\theta^{t}_n$ & 联邦模型参数，客户端模型参数 & $\nabla f(\theta^{t,e}_n)$ & 随机梯度\\
        $\Delta\theta^{t}_n$ & 客户端参数更新 & $u_n^t$，$U^t$ & 归一化参数更新，聚合参数更新\\
        $r_n^{t}$ & 客户端重要性分数 & $\gamma$ & 聚合算法权衡系数\\
        $\psi_n^t$ & 客户端余弦梯度夏普利值 & $p^t$ & 剪枝比例系数\\
        $T_{end}$ & 停止动态剪枝的通信轮数 & $\Delta{T}$ & 动态剪枝的间隔通信轮数\\
        \bottomrule
    \end{tabular}
\label{tab:superparameters}
\end{table}

| 符号                       | 定义                         | 符号                               | 定义                         |
| -------------------------- | ---------------------------- | ---------------------------------- | ---------------------------- |
| $n$，$N$                   | 客户端索引，客户端总数       | $\mathcal{D}_{n}$，$\mathcal{B}_n$ | 本地数据集，小批量训练数据   |
| $\alpha$，$\Delta\alpha$   | 剪枝率，逐层剪枝率           | $\eta^t$                           | 学习率                       |
| $t$，$T$                   | 通信轮次，通信总轮数         | $e$，$E$                           | 本地迭代轮次，本地迭代总轮数 |
| $\theta^t$，$\theta^{t}_n$ | 联邦模型参数，客户端模型参数 | $\nabla f(\theta^{t,e}_n)$         | 随机梯度                     |
| $\Delta\theta^{t}_n$       | 客户端参数更新               | $u_n^t$，$U^t$                     | 归一化参数更新，聚合参数更新 |
| $r_n^{t}$                  | 客户端重要性分数             | $\gamma$                           | 聚合算法权衡系数             |
| $\psi_n^t$                 | 客户端余弦梯度夏普利值       | $p^t$                              | 剪枝比例系数                 |
| $T_{end}$                  | 停止动态剪枝的通信轮数       | $\Delta{T}$                        | 动态剪枝的间隔通信轮数       |

