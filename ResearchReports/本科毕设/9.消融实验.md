## \section{消融实验}

\label{sec:ablation}

本节将通过消融实验分别验证基于动态拓扑的剪枝算法和基于贡献评估的聚合算法的有效性。为了验证这两个模块在样本标签质量存在差异时能帮助联邦模型取得良好的性能，本节使用CIFAR-10数据集，采用非独立同分布和噪声比例不同这两种数据划分方式，根据是否剪枝、是否动态剪枝，以及是否采用贡献评估作为聚合权重来划分实验组。表\ref{tab:ablation-diri05}和表\ref{tab:ablation-noisy}的8个实验组采用了不同的整体剪枝率$\alpha$、初始调整比例系数$p^0$、动态调整间隔轮数$\Delta T$和初始权衡系数$\gamma^0$。其中，实验组1、2、7和8使用与其他实验组剪枝后参数量相近的密集模型进行训练。实验组3、4、9和10静态剪枝的含义是在每个通信轮次开始时，服务器只会对联邦模型中固定位置的权重进行剪枝，即每个通信轮次的剪枝模型的网络拓扑是相同的。

\begin{table}[h] %voc table result
    \centering
    \caption{样本标签非独立同分布时实验组对应的设置和测试准确率}
    \resizebox{0.75\textwidth}{!}{
        \begin{tabular}{*{20}{c}}
            \toprule
             编号 & 参数量 & 剪枝方式 & 聚合方式 & $\alpha$ & $\lambda^0$ & $\gamma^0$ & 测试准确率\\
            \midrule
            1 & 78368 & 不剪枝 & 数据量 & 0.0 & 0.0 & 1.0 & 0.58029\\
            2 & 78368 & 不剪枝 & 贡献评估 & 0.0 & 0.0 & 0.7 & 0.58925\\
            3 & 782006 & 静态剪枝 & 数据量 & 0.9 & 0.0 & 1.0 & 0.56407\\
            4 & 782006 & 静态剪枝 & 贡献评估 & 0.9 & 0.0 & 0.7 & 0.57677\\
            5 & 782006 & 动态剪枝 & 数据量 & 0.9 & 0.1 & 1.0 & 0.60581\\
            6 & 782006 & 动态剪枝 & 贡献评估 & 0.9 &  0.1 & 0.7 & \textbf{0.61864}\\
            \bottomrule
        \end{tabular}}
    \label{tab:ablation-diri05}
\end{table}

\begin{table}[h] %voc table result
    \centering
    \caption{样本标签噪声比例不平衡时实验组对应的设置和测试准确率}
    \resizebox{\textwidth}{!}{
        \begin{tabular}{*{20}{c}}
            \toprule
             编号 & 参数量 & 剪枝方式 & 聚合方式 & $\alpha$ & $\lambda^0$ & $\gamma^0$ & 最优测试准确率 & $t=200$测试准确率\\
            \midrule
            7 & 156736 & 不剪枝 & 数据量 & 0.0 & 0.0 & 1.0 & 0.56474 & 0.53876\\
            8 & 156736 & 不剪枝 & 贡献评估 & 0.0 & 0.0 & 0.7 & 0.57789 & 0.57687\\
            9 & 782006 & 静态剪枝 & 数据量 & 0.8 & 0.0 & 1.0 & 0.56290 & 0.53288\\
            10 & 782006 & 静态剪枝 & 贡献评估 & 0.8 & 0.0 & 0.7 & 0.57886 & 0.57775\\
            11 & 782006 & 动态剪枝 & 数据量 & 0.8 & 0.1 & 1.0 & 0.57610 & 0.54871\\
            12 & 782006 & 动态剪枝 & 贡献评估 & 0.8 & 0.1 & 0.7 & \textbf{0.59947} & \textbf{0.59087}\\
            \bottomrule
        \end{tabular}}
    \label{tab:ablation-noisy}
\end{table}

通过分别比较实验组1-3-5、2-4-6、7-9-11和8-10-12可以发现，在联邦学习的框架中对联邦大模型使用静态剪枝有时不如直接使用规模更小且参数量接近的密集模型进行训练。相比这两种情况，基于动态拓扑的模型剪枝算法能够实现更高的测试准确率，且在样本标签不含噪声的情况下有更大的提升。通过分别比较实验组1-2、3-4、5-6、7-8、9-10和11-12可以发现，相比基于数据量的聚合算法，基于贡献评估的聚合算法能够提高联邦模型的测试准确率，并且在样本标签噪声比例不平衡时对联邦训练的帮助作用更大。通过上述两组对比可以说明，在客户端样本标签质量存在差异的情况下，基于动态拓扑的剪枝算法和基于贡献评估的聚合算法有助于训练一个性能良好的联邦模型。