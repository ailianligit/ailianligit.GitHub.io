### 逻辑地址和物理地址的区别和联系

- 逻辑地址是由**CPU产生**且**用户程序进行处理**的，在使用之前需要使用**内存管理单元中的重定向寄存器**进行转换的地址
- 物理地址是内存中**代码或数据**的真实地址
- 区别：逻辑地址从0开始，进程拥有整个逻辑地址空间，物理地址对应进程在内存中实际位置；在编译时绑定和加载时**绑定**的方法中，逻辑地址和物理地址相同
- 联系：物理地址=逻辑地址+重定向寄存器的值；在运行时**绑定**的方法中，物理地址和逻辑地址不同



### 基址寄存器和限制寄存器的作用

- 基址寄存器保存了地址空间的起始地址
- 限制寄存器保存了地址空间的长度
- 构建一个**逻辑地址空间**
- **保护**用户进程不被其他进程干扰



### 重定向寄存器的作用

- 将重定向寄存器中的**值**加到逻辑地址上可以获得物理地址
- **保护**用户进程不被其他进程干扰



### 地址绑定的方法

- **编译器**绑定源程序中的**符号地址与重定向地址**，**链接器或加载器**绑定**重定向地址和绝对地址**。
- 编译时间：若在编译时知道进程在内存中的位置，则生成**绝对代码**。若之后位置会发生变化，则需要重新编译代码。
- 加载时间：若在编译时不知道进程的位置，那么编译器生成**可重定位**的代码，在**加载时绑定**重定向地址和绝对地址。若起始地址发生变化，需要重新加载用户代码来合并这个变化的值。
- 运行时间：若进程在执行期间可以从一个**内存段**移动到另一个内存段，那么在运行时利用基址寄存器和限制寄存器对重定向地址和绝对地址进行绑定。



### 动态加载的优势

- 仅在**需要时**才加载，有更好的内存空间利用率



### 动态链接库的优势

- 动态链接库的链接推迟到执行阶段，减小可执行映像的大小，**节约内存**空间。
- 动态链接库可以在多个进程之间**共享**，因此内存中只需要有1个DLL实例。
- 动态链接库可以扩展**更新**的库



### 用户程序的多步处理

- 编译器将源代码编译为**目标文件**
- 链接器链接目标文件与其他目标文件，生成**可执行文件**
- 加载器将可执行文件和**系统库文件**加载进入内存
- 运行时可以链接**动态链接库**



### 动态存储分配问题的解决方案（连续分配）

- 首次适应：速度快
- 最佳适应：内存利用率高
- 最差适应



### 碎片的分类及含义

- 外部碎片：在动态存储分配中采用了可变分区，导致内存空间出现大小不一的孔。内存中可用空间的总和满足需求，但是单个的孔不能满足需求
- 内部碎片：分区内的地址空间没有使用完
- 只要进程分区或分段小于外部碎片的大小，则该外部碎片能够得到利用；但是内部碎片只有等到任务结束，分页释放后才能够利用



### 外部碎片的解决方案

- 压缩：在**执行时动态重定向**的方案中，将所有的空闲孔压缩为一个大的空闲块
- 分页



### 分页的优势

- 提高多道程序的程度
- 减少外部碎片



### 页表的作用

- 页表包含物理地址中每个帧的起始地址或者帧号
- 页表的索引是逻辑页号，索引的内容是帧号



### 在页表机制下需要两次内存访问的原因

- 一次访问内存中的页表，读取帧号，组成物理地址
- 另一次是利用物理地址访问内存中的数据



### 两次内存访问的解决方案及其工作原理

- 转换后备缓冲区：每一条记录包含页号和帧号，可提供对内存地址子集的快速访问；若能在TLB中找到对应的页号，则获取帧号与偏移量合成物理地址，若找不到，则发生TLB缺失，需要访问内存中的页表
- 关联内存：在内存中一块部分页和帧相关联的空间，页表的入口在关联内存内，只需一次内存访问



### 页表的结构分类及其原理和优劣

- 层次页表
  - 将一个逻辑地址分成多个部分，每个部分引用不同级别的页表
  - 优势：扩展了页表记录的数量
  - 劣势：访问内存的次数多，时间慢，且当地址空间大于32位时，需要的层级较多，进一步增加访问内存的次数
- 哈希页表
  - 哈希函数将逻辑页号映射为一个链表的入口，该链表为映射结果相同的一组记录，遍历该链表可以找到逻辑页号对应的物理页号
  - 优势：适用于大地址空间
  - 劣势：哈希冲突、容量固定
- 反向页表
  - 反向页表是真实物理内存的一个映像，页表中每一项为进程号和逻辑页号，通过遍历页表可以根据记录的位置得到内存中帧的真实地址
  - 优势：适用于大地址空间；减少了存储每个页表的内存空间
  - 劣势：时间开销大，可以用哈希函数减小查找的时间



### 段表、页表和TLB的区别

- 段表：索引是逻辑段号，内容有物理段号和物理段的长度
- 页表：索引是逻辑页号，内容有帧号和有效位（反向页表中还有进程号）
- TLB：记录的内容有页号和帧号



### 连续分配、分页和分段的区别

- 连续分配是为整个进程分配地址空间，因为进程的大小不一，因此只能使用可变分区的策略，容易形成孔，也就是外部碎片
- 为了减少外部碎片，可以将逻辑地址空间分成大小相同的小页，整个逻辑地址空间在物理地址空间上不必连续，只需要借助页表即可将逻辑地址映射为物理地址
- 分段的含义是将逻辑地址空间按其功能划分为大小不同的小段，整个逻辑地址空间在物理地址空间上不必连续，只需要借助段表即可将逻辑地址映射为物理地址，有助于进行**代码共享和权限管理**



### 地址空间标识符的作用

- TLB记录的一部分，用于标识与该记录关联的进程，若请求的进程与地址空间标识符不**匹配**，会导致TLB缺失
- 提供**保护**机制，不能访问其他进程的地址空间



### 内存保护的机制

- 重定位寄存器
- 保护位：有效-非有效
- TLB中的地址空间标识符



### 影响多道程序化程度的机制

- 长程调度（工作调度）

- 中程调度（交换）
- 虚拟内存和按需调页（页面置换）
- 动态加载



### 多道程序、长程调度（工作调度）、交换调页和CPU利用率的关系

- 多道程序化的程度越高，CPU的利用率越大。
- 长程调度（工作调度）控制着多道程序化的程度。
- 交换机制有助于增加多道程序的程度。