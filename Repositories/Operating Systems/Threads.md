### 线程的定义及其与进程的区别

- 用于分配和调度的执行单元，CPU利用率的基本单位
- 进程：资源的拥有者



### 进程和线程的特点

- 进程：拥有一个存有进程映像的虚拟地址空间；有被保护的处理器和资源**权限**
- 线程：线程状态转移；停止运行保存状态；有局部变量的静态存储空间；可以访问进程的内存和资源



### 多线程的类型

- 单进程单线程、单进程多线程、多进程每个进程单线程、多进程每个进程多线程




### 线程共享的内容和独有的内容

- 共享的内容：数据（堆和全局变量）、代码、文件
- 独有的内容：栈、寄存器



### 多线程的优势

- 可靠性、节约资源、经济



### 并发和并行的定义及区别

- 并发：多个线程可供执行
- 并行：多个线程并行执行
- 区别：在单核系统上只能实现并发，并行只能在多核系统上实现



### 多线程设计面临的挑战

- 分割和平衡任务
- 在线程之间划分数据
- 识别数据的依赖关系
- 测试和调试



### 数据并行和任务并行的区别

- 数据并行：在每个核上有完整数据集的一部分，执行相同的操作
- 任务并行：将任务分发给不同的核，每个核执行不同的任务



### 用户级线程和内核级线程的定义及区别

- 用户级线程：在用户模式下运行的线程，由用户级线程库进行管理
- 内核级线程：在内核模式下运行的线程，由内核进行管理



### 多线程模型的分类及优劣（角度：阻塞，时间片，内核资源，时间开销，线程切换，调度修改，并行）

- 一对一模型：互不干扰，某线程发生阻塞时不会影响整个进程；可以分到的CPU时间片多；消耗内核资源；系统调用时间开销大；不易切换线程；不易修改；可用于并行系统
- 多对一模型：线程发生阻塞整个进程会被阻塞；多个线程以一个线程为单位在队列中等待，分到的CPU时间片少；内核资源消耗小；开销相比一对一模型小；切换线程节省时间；有变化只需修改用户级线程库
- 多对多模型：互不干扰，某线程发生阻塞时不会影响整个进程；可以分到的CPU时间片多；消耗内核资源；切换线程节省时间；有变化只需修改用户级线程库；
- 两级模型：常用于服务器中，有多对一模型和一对一模型两种



### 多对多模型中内核级线程的数量与处理器数量之间的关系

（内核级线程数量始终少于用户级线程数量）

- 若内核级线程数量少于处理器的数量：因此调度程序是对内核级线程进行CPU调度的，因此一些处理器会保持空间状态
- 若内核级线程数量等于处理器的数量：可能出现所有的处理器被同时利用；然而当某个内核级线程阻塞时，对应的处理器会处于空闲状态
- 若内核级线程数量多于处理器的数量：阻塞的内核级线程会被换出，换入另一个内核级线程，提高了CPU的利用率



### 多线程上下文切换

- 从轻量级进程中获取一个线程，保存该线程的寄存器的状态
- 选择另一个线程代替该线程，加载代替线程的寄存器的状态



### 超线程的含义

- 分配多硬件线程给一个运行的核，提高计算的并行能力



### 线程的取消

- 在线程运行结束之前取消线程



### 隐式线程的定义和应用

- 隐式线程管理：将线程的创建和管理任务从应用开发者转移给编译器和运行库
- 应用：线程池



### 线程池的特点及优劣

- 特点：线程池创建和管理线程，线程中的线程等待被分配任务
- 优势：统一管理，控制并发，复用线程，减少开销
- 劣势：无法识别线程的状态，有限大小，不适用于单线程