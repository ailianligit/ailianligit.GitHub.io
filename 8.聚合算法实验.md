## \section{基于贡献评估的聚合算法对联邦训练的影响}

\label{sec:exp-aggregation}



### \subsection{聚合算法权衡系数$\gamma$的影响}

\label{subsec:exp-aggregation-1}

超参数变化 **噪声数据**

数据分布：iid 0.1 0.5

剪枝算法：是

剪枝率：

动态剪枝：是

剪枝间隔：

初始比例：

聚合算法：是

权衡系数：0.0 0.2 0.4 0.6 0.8 1.0

统计指标：轮数

收敛速度：1.0最快

曲线稳定：1.0最稳定

最终精度：tradeoff

稳定性与探索之间的权衡

| 调整率 | non           | 0.0       | 0.2       | 0.4             | 0.6       | 0.8       | 1.0           |
| ------ | ------------- | --------- | --------- | --------------- | --------- | --------- | ------------- |
| 0.1    | **0.52653** a | 0.38625 c | 0.45494 a | 0.40347 j       | 0.4308 x  | 0.39197 b | 0.416720003 b |
| 0.5    | **0.61985** a | 0.53255 a | 0.56927 a | 0.610335001 j+l | 0.607 l   | 0.60421 j | 0.626300001 a |
| iid    | **0.66816** a | 0.6558 a  | 0.65311 a | 0.660710007 a   | 0.65535 a | 0.64995 a | 0.65926 a     |

| 调整率 | 0.0                                    | 0.2                                   | 0.4                                                          | 0.6                                                          | 0.8                                                          | 0.85                            | 0.9                                       | 0.95                            | 1.0                                   |
| ------ | -------------------------------------- | ------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------- | ----------------------------------------- | ------------------------------- | ------------------------------------- |
| 0.1    | 0.330805 a 0.37043 b **0.388865001** c | **0.42313** a 0.389479999 b 0.30223 x | 0.278125003 a 0.340215001 b 0.312909999 c **0.39602** j 0.352279998 k 0.302900001 l | 0.307969999 a 0.253070002 b 0.255175 c 0.350985001 j **0.428744999** x 0.262514998 k 0.33723 l | 0.456585 fa 0.308950001 a 0.394620003 b 0.292924999 j 0.342279997 k 0.343424998 l **0.35306** c | **0.306080003** a 0.275485006 b | **0.33024** a 0.325039999 b **0.34849** c | 0.388230003 a **0.409104998** b | 【**0.52653**】0.3514 a 0.416695002 b |
| 0.5    | **0.533730003** a                      | **0.568895005** a                     | 0.557160007 a **0.608160001** j 0.592605001 k 0.568165003 l  | 0.553935 a 0.582350001 j 0.568710002 x 0.580015007 k **0.598215005** l | 0.593399999 fa 0.570045003 a **0.604594994** j 0.583705008 k 0.523244995 l | **0.561580005** a 0.553200001 b | 0.61401 a **0.615650001** b               | **0.607940003** a 0.60141 b     | 【0.61985】**0.626104999** a          |
| iid    | 0.652115002 a                          | 0.651829997 a                         | 0.66256001 a                                                 | 0.6509 a                                                     | 0.636015001 fa 0.647539997 a                                 |                                 |                                           |                                 | 【0.66816】0.659364998 a              |

| 剪枝率         | 0.0  | 0.1   | 0.2  | 0.3   | 0.4  | 0.5   | 0.6  | 0.7   | 0.8  | 0.9   | 1.0      |
| -------------- | ---- | ----- | ---- | ----- | ---- | ----- | ---- | ----- | ---- | ----- | -------- |
| 0.0            | 2    |       | 2    |       | 2    | 2     | 2    | 1     | 1    | 1     | 0.47538  |
| 0.8            |      | test1 |      | test2 |      | test4 |      | test5 |      | test6 | 0.532715 |
| noniid 0.5 0.9 |      | 0.56  |      | 0.56  |      | 0.55  |      | 0.56  |      | 0.55  | 0.57     |



### \subsection{贡献评估与剪枝率的探究性实验}

\label{subsec:exp-aggregation-2}

#### 对客户端进行贡献评估

--clients 20
--total-clients 20
--rounds 100

--sparsity 0.5

--outfile import4.csv import5.csv import6.csv

--device

--seed 0

| 0        | 1        | 2        | 3        | 4        | 5        | 6        | 7        | 8        | 9        | 10       | 11       | 12       | 13       | 14       | 15       | 16       | 17       | 18       | 19       |
| -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- |
| 0.036693 | 0.143463 | 0.022392 | 0.013395 | 0.013322 | 0.097979 | 0.00082  | 0.030039 | 0.07451  | 0.095612 | 0.021992 | 0.024536 | 0.001371 | 0.108641 | 0.054097 | 0.135757 | 0.025188 | 0.066354 | 0.033022 | 0.00082  |
| 0.038035 | 0.138636 | 0.018062 | 0.018202 | 0.027399 | 0.09896  | 0.005816 | 0.032438 | 0.069059 | 0.086187 | 0.02408  | 0.024471 | 0.000802 | 0.101577 | 0.053095 | 0.133617 | 0.022667 | 0.069473 | 0.036621 | 0.000802 |
| 0.031099 | 0.119816 | 0.019614 | 0.016635 | 0.028463 | 0.092628 | 0.006936 | 0.030232 | 0.073709 | 0.086995 | 0.034614 | 0.028178 | 0.004555 | 0.100767 | 0.050759 | 0.138475 | 0.023096 | 0.073827 | 0.037469 | 0.002134 |

| index | test1    | test2    | test3    | avg          | rank | rank1 | rank2 | rank3 |      |
| ----- | -------- | -------- | -------- | ------------ | ---- | ----- | ----- | ----- | ---- |
| 15    | 0.135757 | 0.133617 | 0.138475 | **0.13595**  | 1    | 2     | 2     | 1     | 4651 |
| 1     | 0.143463 | 0.138636 | 0.119816 | 0.133971     | 2    | 1     | 1     | 2     | 5293 |
| 13    | 0.108641 | 0.101577 | 0.100767 | 0.103662     | 3    | 3     | 3     | 3     | 4288 |
| 5     | 0.097979 | 0.09896  | 0.092628 | 0.096523     | 4    | 4     | 4     | 4     | 3987 |
| 9     | 0.095612 | 0.086187 | 0.086995 | 0.089598     | 5    | 5     | 5     | 5     | 2821 |
| 8     | 0.07451  | 0.069059 | 0.073709 | **0.072426** |      |       |       |       | 3121 |
| 17    | 0.066354 | 0.069473 | 0.073827 | 0.069884     |      |       |       |       | 2748 |
| 14    | 0.054097 | 0.053095 | 0.050759 | 0.05265      |      |       |       |       | 2595 |
| 18    | 0.033022 | 0.036621 | 0.037469 | 0.035704     |      |       |       |       | 2172 |
| 0     | 0.036693 | 0.038035 | 0.031099 | 0.035275     |      |       |       |       | 2036 |
| 7     | 0.030039 | 0.032438 | 0.030232 | 0.030903     |      |       |       |       | 2109 |
| 10    | 0.021992 | 0.02408  | 0.034614 | 0.026895     |      |       |       |       | 2103 |
| 11    | 0.024536 | 0.024471 | 0.028178 | 0.025728     |      |       |       |       | 1584 |
| 16    | 0.025188 | 0.022667 | 0.023096 | 0.02365      |      |       |       |       | 1504 |
| 4     | 0.013322 | 0.027399 | 0.028463 | **0.023061** |      | 17    |       |       | 3033 |
| 2     | 0.022392 | 0.018062 | 0.019614 | 0.020023     | 16   |       | 17    | 16    | 913  |
| 3     | 0.013395 | 0.018202 | 0.016635 | 0.016077     | 17   | 16    | 16    | 17    | 1178 |
| 6     | 0.00082  | 0.005816 | 0.006936 | **0.004524** | 18   | 19    | 18    | 18    | 693  |
| 12    | 0.001371 | 0.000802 | 0.004555 | 0.002243     | 19   | 18    | 19    | 19    | 26   |
| 19    | 0.00082  | 0.000802 | 0.002134 | 0.001252     | 20   | 20    | 20    | 20    | 5    |

#### 两组剪枝率对比实验

--clients 20
--total-clients 20

--seed 0

--high-sparsity

--low-sparsity

--outfile

--device

|         | 0.0         | 0.2         | 0.4         | 0.6         | 0.8         |
| ------- | ----------- | ----------- | ----------- | ----------- | ----------- |
| **0.0** | 0.18051     | 0.169320001 | 0.162209998 | 0.173109999 | 0.174859999 |
| **0.2** | 0.205290002 | 0.207354999 | 0.205089999 | 0.211660001 | 0.189490001 |
| **0.4** | 0.44691     | 0.431469998 | 0.432804994 |             | 0.4242      |
| **0.6** | 0.42694     | 0.43971     | 0.43797     |             | 0.424870002 |
| **0.8** | 0.374450001 |             | 0.411130001 | 0.418875001 | 0.42956     |

| 剪枝率  | 0.4             | 0.6         | 0.7             | 0.8             | 0.9             |
| ------- | --------------- | ----------- | --------------- | --------------- | --------------- |
| **0.4** | 0.4511          | 0.42633     | **0.423690003** | **0.429950002** | **0.40312**     |
| **0.6** | **0.428510001** | 0.428060001 | **0.435879999** | **0.432929999** | **0.409780005** |
| **0.7** | 0.413100001     | 0.433719999 | 0.423110002     | **0.43265**     | **0.418679997** |
| **0.8** | 0.350255002b    | 0.41558     | 0.423990002     | 0.40616b        | **0.403010002** |
| **0.9** | 0.31596         | 0.3459      | 0.40028         | 0.399060002     | 0.400299999     |

| 0.5     |                  | 0.6     |                 | 0.7     |                  | 0.8     |             |
| ------- | ---------------- | ------- | --------------- | ------- | ---------------- | ------- | ----------- |
|         |                  | 0.4-0.8 | 0.429950002     | 0.5-0.9 | **0.4064500025** |         |             |
| 0.4-0.6 | 0.42633          | 0.5-0.7 | **0.429785001** | 0.6-0.8 | 0.432929999      | 0.7-0.9 | 0.418679997 |
| 0.5-0.5 | **0.4395800005** | 0.6-0.6 | 0.428060001     | 0.7-0.7 | 0.423110002      | 0.8-0.8 | 0.40616b    |
| 0.6-0.4 | 0.428510001      | 0.7-0.5 | **0.42341**     | 0.8-0.6 | 0.41558          | 0.9-0.7 | 0.40028     |
|         |                  | 0.8-0.4 | 0.350255002b    | 0.9-0.5 | **0.33093**      |         |             |

| 0.5     |             | 0.6     |             | 0.7     |             | 0.8     |             |
| ------- | ----------- | ------- | ----------- | ------- | ----------- | ------- | ----------- |
|         |             | 0.4-0.8 | 0.48355     | 0.5-0.9 | 0.49153     |         |             |
| 0.4-0.6 | 0.49603     | 0.5-0.7 | 0.483385    | 0.6-0.8 | 0.48469     | 0.7-0.9 | 0.47058     |
| 0.5-0.5 | 0.497354999 | 0.6-0.6 | 0.481660001 | 0.7-0.7 | 0.474870002 | 0.8-0.8 | 0.458060001 |
| 0.6-0.4 | 0.496248    | 0.7-0.5 | 0.47701     | 0.8-0.6 | 0.46734     | 0.9-0.7 | 0.45218     |
|         |             | 0.8-0.4 | 0.403855    | 0.9-0.5 | 0.38269     |         |             |

--sparsity 0.0?

--distribution iid 噪声

--grad-agg --tradeoff 0.8?

--need-readjust --readjustment-ratio 0.5 --rounds-between-readjustments 10

--seed 0

--outfile cifar10_05_diri_01_0.csv

--outfile2 cifar10_05_diri_01_0_score.csv

--device
